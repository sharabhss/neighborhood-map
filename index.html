<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <title>Neighborhood Map</title>
  <link href="css/style.css" rel="stylesheet">
    <!-- Link google api, jquery CDN, table js, and google map implementation js -->
  <script async src="http://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyAUzhyYPNn45RlTGT8ExwELVE6LIXKmBWA"></script>
  <script src="js/lib/jquery.min.js"></script>
  <script src="js/lib/knockout-3.2.0.js"></script>
  <script async src="js/main.js"></script>
</head>
<body>
  <!-- Container for search bar and table contents -->
  <div id="tableDiv">
    <!-- Search bar -->
    <form>
      <input id="searchInput" onkeyup="filterSearch()" placeholder="Search for Cities" title="Type in a place" type="text">
    </form>
    <!-- Table of locations -->
    <table id="locationTable">
      <thead>
        <tr class="header">
          <th style="width:50%">City</th>
          <th style="width:50%">State</th>
        </tr>
      </thead>
      <tbody data-bind="foreach: cityList">
        <tr data-bind="click: $parent.setCity">
          <td data-bind="text: city"></td>
          <td data-bind="text: state"></td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- Google Map -->
  <div id="mapDiv">
    <div id="map"></div>
  </div>
  <!--Filter search of the table of locations called by the search bar form -->
  <script>
    function filterSearch() {
      var input = document.getElementById("searchInput"); //get the typed input from the search bar element
      var filter = input.value.toUpperCase(); //format the typed input for search
      var table = document.getElementById("locationTable"); //get the table element for comparision
      var tr = table.getElementsByTagName("tr"); //get the table row element to loop through
      for (var i = 0; i < tr.length; i++) {
        var td = tr[i].getElementsByTagName("td")[0]; //we only need to go through the table data so get td element
        //do the comparision and only display the ones that match
        if (td) {
          if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }
  </script>
</body>
</html>